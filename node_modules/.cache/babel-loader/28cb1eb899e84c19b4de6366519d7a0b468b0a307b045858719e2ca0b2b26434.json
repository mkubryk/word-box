{"ast":null,"code":"import{Link}from'react-router-dom';import React,{useEffect,useState}from'react';import{useLanguage}from'../../store/languageContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListeMot=()=>{const[mots,setMots]=useState([]);const{language,languageData}=useLanguage();// Fonction pour récupérer les mots favoris depuis le back\nconst getFavWords=async login=>{try{const response=await fetch('http://localhost/word-box/server/routeur.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({objet:'Mot_sympa',action:'userFavWords',userName:login})});if(!response.ok){throw new Error(`Erreur HTTP ! statut : ${response.status}`);}const data=await response.json();console.log('Réponse du webservice:',data);return data.data||[];}catch(error){console.error(\"Erreur lors de la récupération des mots favoris :\",error);return[];}};// Charger les mots favoris au montage du composant\nuseEffect(()=>{const fetchFavWords=async()=>{var _sessionStorage$getIt;const userName=(_sessionStorage$getIt=sessionStorage.getItem('userName'))!==null&&_sessionStorage$getIt!==void 0?_sessionStorage$getIt:'leChevalierNoir';// Remplacez par le nom d'utilisateur connecté\nconst favWords=await getFavWords(userName);setMots(favWords);};fetchFavWords();},[]);// Fonction pour basculer le statut de favori\nconst supprFavoris=item=>{console.log(\"Cœur cliqué !\");const element=document.getElementById(item.nomMot);if(element){element.classList.toggle(\"bi-suit-heart-fill\");element.classList.toggle(\"bi-suit-heart\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[sessionStorage.getItem('userName')==='leChevalierNoir'?/*#__PURE__*/_jsx(\"h1\",{children:languageData.ourList}):'',mots.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"wrapper fit-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper fit-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:languageData.emptyList}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h2\",{className:\"wrapper fit-box\",children:[languageData.fillList,\" \",/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-backpack3-fill\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",\"data-translate-key\":\"goToFillList\",children:/*#__PURE__*/_jsx(Link,{to:`/home`,\"data-translate-key\":\"goToFillList\",children:languageData.goToFillList})})]})}):'',mots.map((item,index)=>{// Sélectionne la définition selon la langue\nconst definition=language==='fr'?item.definitionMotFR:item.definitionMotENG;const mot=language==='fr'?item.nomMotFR:item.nomMot;return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{children:mot}),/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-suit-heart-fill\",id:mot,onClick:()=>supprFavoris(item)}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:languageData.definition}),\" \",definition||languageData.unknownDef]})]},index);})]});};export default ListeMot;","map":{"version":3,"names":["Link","React","useEffect","useState","useLanguage","jsx","_jsx","jsxs","_jsxs","ListeMot","mots","setMots","language","languageData","getFavWords","login","response","fetch","method","headers","body","URLSearchParams","objet","action","userName","ok","Error","status","data","json","console","log","error","fetchFavWords","_sessionStorage$getIt","sessionStorage","getItem","favWords","supprFavoris","item","element","document","getElementById","nomMot","classList","toggle","children","ourList","length","className","emptyList","fillList","class","to","goToFillList","map","index","definition","definitionMotFR","definitionMotENG","mot","nomMotFR","id","onClick","unknownDef"],"sources":["C:/Users/melis/OneDrive/Documents/ENSIIE/S1/web/PROJET-1/boite-a-mot-good-vers/front/src/pages/ListeMot/ListeMot.jsx"],"sourcesContent":["import { Link } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useLanguage } from '../../store/languageContext';\r\n\r\nconst ListeMot = () => {\r\n  const [mots, setMots] = useState([]);\r\n  const { language, languageData } = useLanguage(); \r\n\r\n  // Fonction pour récupérer les mots favoris depuis le back\r\n  const getFavWords = async (login) => {\r\n    try {\r\n      const response = await fetch('http://localhost/word-box/server/routeur.php', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: new URLSearchParams({\r\n          objet: 'Mot_sympa',\r\n          action: 'userFavWords',\r\n          userName: login,\r\n        }),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP ! statut : ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Réponse du webservice:', data);\r\n      return data.data || [];\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la récupération des mots favoris :\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Charger les mots favoris au montage du composant\r\n  useEffect(() => {\r\n    const fetchFavWords = async () => {\r\n      const userName = sessionStorage.getItem('userName') ?? 'leChevalierNoir'; // Remplacez par le nom d'utilisateur connecté\r\n      const favWords = await getFavWords(userName);\r\n      setMots(favWords);\r\n    };\r\n\r\n    fetchFavWords();\r\n  }, []);\r\n\r\n  // Fonction pour basculer le statut de favori\r\n  const supprFavoris = (item) => {\r\n    console.log(\"Cœur cliqué !\");\r\n    const element = document.getElementById(item.nomMot);\r\n    if (element) {\r\n      element.classList.toggle(\"bi-suit-heart-fill\");\r\n      element.classList.toggle(\"bi-suit-heart\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      { sessionStorage.getItem('userName') === 'leChevalierNoir' ?\r\n          <h1>{languageData.ourList}</h1>\r\n        : ''}\r\n        { mots.length === 0 ?\r\n        <div className='wrapper fit-box'>\r\n          <div  className=\"wrapper fit-box\">\r\n          <h1>{languageData.emptyList}</h1>\r\n          <br/>\r\n          <h2 className='wrapper fit-box'>{languageData.fillList} <i class=\"bi bi-backpack3-fill\"></i></h2>\r\n          \r\n          <button className=\"btn\"  data-translate-key=\"goToFillList\"><Link to={`/home`} data-translate-key=\"goToFillList\">{languageData.goToFillList}</Link></button>\r\n          \r\n        </div>\r\n        </div>\r\n        : ''}\r\n      \r\n      { mots.map((item, index) => {\r\n        // Sélectionne la définition selon la langue\r\n        const definition = language === 'fr' ? item.definitionMotFR : item.definitionMotENG;\r\n        const mot = language === 'fr' ? item.nomMotFR : item.nomMot;\r\n\r\n        return (\r\n          <div key={index} className=\"wrapper\">\r\n            <h1>{mot}</h1>\r\n            <i\r\n              className=\"bi bi-suit-heart-fill\"\r\n              id={mot}\r\n              onClick={() => supprFavoris(item)}\r\n            ></i>\r\n            <p>\r\n              <strong>{languageData.definition}</strong> {definition || languageData.unknownDef}\r\n            </p>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListeMot;\r\n"],"mappings":"AAAA,OAASA,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1D,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAES,QAAQ,CAAEC,YAAa,CAAC,CAAGT,WAAW,CAAC,CAAC,CAEhD;AACA,KAAM,CAAAU,WAAW,CAAG,KAAO,CAAAC,KAAK,EAAK,CACnC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8CAA8C,CAAE,CAC3EC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,mCAClB,CAAC,CACDC,IAAI,CAAE,GAAI,CAAAC,eAAe,CAAC,CACxBC,KAAK,CAAE,WAAW,CAClBC,MAAM,CAAE,cAAc,CACtBC,QAAQ,CAAET,KACZ,CAAC,CACH,CAAC,CAAC,CACF,GAAI,CAACC,QAAQ,CAACS,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,0BAA0BV,QAAQ,CAACW,MAAM,EAAE,CAAC,CAC9D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEH,IAAI,CAAC,CAC3C,MAAO,CAAAA,IAAI,CAACA,IAAI,EAAI,EAAE,CACxB,CAAE,MAAOI,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,mDAAmD,CAAEA,KAAK,CAAC,CACzE,MAAO,EAAE,CACX,CACF,CAAC,CAED;AACA9B,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+B,aAAa,CAAG,KAAAA,CAAA,GAAY,KAAAC,qBAAA,CAChC,KAAM,CAAAV,QAAQ,EAAAU,qBAAA,CAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,UAAAF,qBAAA,UAAAA,qBAAA,CAAI,iBAAiB,CAAE;AAC1E,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAvB,WAAW,CAACU,QAAQ,CAAC,CAC5Cb,OAAO,CAAC0B,QAAQ,CAAC,CACnB,CAAC,CAEDJ,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAK,YAAY,CAAIC,IAAI,EAAK,CAC7BT,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5B,KAAM,CAAAS,OAAO,CAAGC,QAAQ,CAACC,cAAc,CAACH,IAAI,CAACI,MAAM,CAAC,CACpD,GAAIH,OAAO,CAAE,CACXA,OAAO,CAACI,SAAS,CAACC,MAAM,CAAC,oBAAoB,CAAC,CAC9CL,OAAO,CAACI,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC,CAC3C,CACF,CAAC,CAED,mBACErC,KAAA,QAAAsC,QAAA,EACIX,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,GAAK,iBAAiB,cACtD9B,IAAA,OAAAwC,QAAA,CAAKjC,YAAY,CAACkC,OAAO,CAAK,CAAC,CAC/B,EAAE,CACFrC,IAAI,CAACsC,MAAM,GAAK,CAAC,cACnB1C,IAAA,QAAK2C,SAAS,CAAC,iBAAiB,CAAAH,QAAA,cAC9BtC,KAAA,QAAMyC,SAAS,CAAC,iBAAiB,CAAAH,QAAA,eACjCxC,IAAA,OAAAwC,QAAA,CAAKjC,YAAY,CAACqC,SAAS,CAAK,CAAC,cACjC5C,IAAA,QAAI,CAAC,cACLE,KAAA,OAAIyC,SAAS,CAAC,iBAAiB,CAAAH,QAAA,EAAEjC,YAAY,CAACsC,QAAQ,CAAC,GAAC,cAAA7C,IAAA,MAAG8C,KAAK,CAAC,sBAAsB,CAAI,CAAC,EAAI,CAAC,cAEjG9C,IAAA,WAAQ2C,SAAS,CAAC,KAAK,CAAE,qBAAmB,cAAc,CAAAH,QAAA,cAACxC,IAAA,CAACN,IAAI,EAACqD,EAAE,CAAE,OAAQ,CAAC,qBAAmB,cAAc,CAAAP,QAAA,CAAEjC,YAAY,CAACyC,YAAY,CAAO,CAAC,CAAQ,CAAC,EAExJ,CAAC,CACD,CAAC,CACJ,EAAE,CAEJ5C,IAAI,CAAC6C,GAAG,CAAC,CAAChB,IAAI,CAAEiB,KAAK,GAAK,CAC1B;AACA,KAAM,CAAAC,UAAU,CAAG7C,QAAQ,GAAK,IAAI,CAAG2B,IAAI,CAACmB,eAAe,CAAGnB,IAAI,CAACoB,gBAAgB,CACnF,KAAM,CAAAC,GAAG,CAAGhD,QAAQ,GAAK,IAAI,CAAG2B,IAAI,CAACsB,QAAQ,CAAGtB,IAAI,CAACI,MAAM,CAE3D,mBACEnC,KAAA,QAAiByC,SAAS,CAAC,SAAS,CAAAH,QAAA,eAClCxC,IAAA,OAAAwC,QAAA,CAAKc,GAAG,CAAK,CAAC,cACdtD,IAAA,MACE2C,SAAS,CAAC,uBAAuB,CACjCa,EAAE,CAAEF,GAAI,CACRG,OAAO,CAAEA,CAAA,GAAMzB,YAAY,CAACC,IAAI,CAAE,CAChC,CAAC,cACL/B,KAAA,MAAAsC,QAAA,eACExC,IAAA,WAAAwC,QAAA,CAASjC,YAAY,CAAC4C,UAAU,CAAS,CAAC,IAAC,CAACA,UAAU,EAAI5C,YAAY,CAACmD,UAAU,EAChF,CAAC,GATIR,KAUL,CAAC,CAEV,CAAC,CAAC,EACC,CAAC,CAEV,CAAC,CAED,cAAe,CAAA/C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}