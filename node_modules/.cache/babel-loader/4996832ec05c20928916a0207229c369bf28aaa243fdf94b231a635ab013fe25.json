{"ast":null,"code":"import{Link}from\"react-router-dom\";import{useState}from\"react\";import{useLanguage}from'../../store/languageContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MdpOublie(){const{languageData}=useLanguage();const[login,setLogin]=useState(\"\");const[mdp,setMdp]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");// Pour afficher les messages d'erreur\nconst submitMdp=async()=>{try{const response=await fetch('http://localhost/word-box/server/routeur.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({objet:'Client',action:'updateMdp',username:login,mdp:mdp})});if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();console.log('reponse webservice',data);return data.data;}catch(error){console.error(\"Erreur lors de la création du compte :\",error);return false;}};// Appeler la fonction checkCredentials dans handleSubmit\nconst handleSubmit=async e=>{e.preventDefault();const isValid=await submitMdp();if(isValid){window.location.href=\"/home\";// Rediriger vers la page d'accueil\n}else{setErrorMessage(\"Échec de la connexion. Inscription Failed.\");}};return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:languageData.forgotPassword}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"txt\",placeholder:languageData.username,value:login,onChange:e=>setLogin(e.target.value)// Met à jour l'état\n,required:true}),/*#__PURE__*/_jsx(\"i\",{class:\"bx bxs-lock-alt\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:languageData.newMdp,value:mdp,onChange:e=>setMdp(e.target.value)// Met à jour l'état\n,required:true}),/*#__PURE__*/_jsx(\"i\",{class:\"bx bxs-lock-alt\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/connexion\",children:\"OK\"})})]})})});}export default MdpOublie;","map":{"version":3,"names":["Link","useState","useLanguage","jsx","_jsx","jsxs","_jsxs","MdpOublie","languageData","login","setLogin","mdp","setMdp","errorMessage","setErrorMessage","submitMdp","response","fetch","method","headers","body","URLSearchParams","objet","action","username","ok","Error","data","json","console","log","error","handleSubmit","e","preventDefault","isValid","window","location","href","children","class","onSubmit","forgotPassword","type","placeholder","value","onChange","target","required","newMdp","to"],"sources":["C:/Users/melis/OneDrive/Documents/ENSIIE/S1/web/PROJET-1/boite-a-mot-good-vers/front/src/pages/Connexion/MdpOublie.jsx"],"sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport { useLanguage } from '../../store/languageContext';\r\n\r\nfunction MdpOublie() {\r\n    const { languageData } = useLanguage();\r\n\r\n    const [login, setLogin] = useState(\"\");\r\n    const [mdp, setMdp] = useState(\"\");\r\n    const [errorMessage, setErrorMessage] = useState(\"\"); // Pour afficher les messages d'erreur\r\n\r\n    const submitMdp = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost/word-box/server/routeur.php', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                },\r\n                body: new URLSearchParams({\r\n                    objet: 'Client',\r\n                    action: 'updateMdp',\r\n                    username: login,\r\n                    mdp: mdp,\r\n\r\n                }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Network response was not ok');\r\n            }\r\n            const data = await response.json();\r\n            console.log('reponse webservice', data);\r\n            return data.data;\r\n        } catch (error) {\r\n            console.error(\"Erreur lors de la création du compte :\", error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    // Appeler la fonction checkCredentials dans handleSubmit\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const isValid = await submitMdp();\r\n        if (isValid) {\r\n            window.location.href = \"/home\"; // Rediriger vers la page d'accueil\r\n        } else {\r\n            setErrorMessage(\"Échec de la connexion. Inscription Failed.\");\r\n        }\r\n    };\r\n    return (\r\n        <main>\r\n            <div class=\"wrapper\">\r\n                <form onSubmit={handleSubmit}>\r\n                    <h2>{languageData.forgotPassword}</h2>\r\n                    <div class=\"input-box\">\r\n                        <input type=\"txt\" placeholder={languageData.username} value={login}\r\n                            onChange={(e) => setLogin(e.target.value)} // Met à jour l'état\r\n                            required />\r\n                        <i class='bx bxs-lock-alt'></i>\r\n                    </div>\r\n                    <div class=\"input-box\">\r\n                        <input type=\"password\" placeholder={languageData.newMdp} value={mdp}\r\n                            onChange={(e) => setMdp(e.target.value)} // Met à jour l'état\r\n                            required />\r\n                        <i class='bx bxs-lock-alt'></i>\r\n                    </div>\r\n                    <button type=\"submit\" class=\"btn\"><Link to=\"/connexion\">OK</Link></button>\r\n                </form>\r\n            </div>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default MdpOublie;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}