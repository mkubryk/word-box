{"ast":null,"code":"import{Link}from'react-router-dom';import React,{useEffect,useState}from'react';import{useLanguage}from'../../store/languageContext';import{useTheme}from'../../store/themeContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListeMot=()=>{const[mots,setMots]=useState([]);const{language,languageData}=useLanguage();const{themeData}=useTheme();const deleteFavWordsToUser=async(login,numMot)=>{try{const response=await fetch('http://localhost/word-box/server/routeur.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({objet:'Liste_mot_sympa',action:'delete',userName:login,numMot:numMot})});if(!response.ok){throw new Error(`Erreur HTTP ! statut : ${response.status}`);}const data=await response.json();console.log('Réponse du webservice:',data);return data.data||[];}catch(error){console.error(\"Erreur lors de la récupération des mots favoris :\",error);return[];}};// Fonction pour récupérer les mots favoris depuis le back\nconst getFavWords=async login=>{try{const response=await fetch('http://localhost/word-box/server/routeur.php',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({objet:'Mot_sympa',action:'userFavWords',userName:login})});if(!response.ok){throw new Error(`Erreur HTTP ! statut : ${response.status}`);}const data=await response.json();console.log('Réponse du webservice:',data);return data.data||[];}catch(error){console.error(\"Erreur lors de la récupération des mots favoris :\",error);return[];}};// Charger les mots favoris au montage du composant\nuseEffect(()=>{const fetchFavWords=async()=>{var _sessionStorage$getIt;const userName=(_sessionStorage$getIt=sessionStorage.getItem('userName'))!==null&&_sessionStorage$getIt!==void 0?_sessionStorage$getIt:'leChevalierNoir';// Remplacez par le nom d'utilisateur connecté\nconst favWords=await getFavWords(userName);setMots(favWords);};fetchFavWords();},[]);// Fonction pour basculer le statut de favori\nconst supprFavoris=item=>{const element=document.getElementById(item.nomMot);if(element){element.classList.toggle(\"bi-suit-heart-fill\");element.classList.toggle(\"bi-suit-heart\");}};return/*#__PURE__*/_jsx(\"main\",{class:themeData.main,children:/*#__PURE__*/_jsxs(\"div\",{children:[sessionStorage.getItem('userName')==='leChevalierNoir'?/*#__PURE__*/_jsx(\"h1\",{children:languageData.ourList}):'',mots.length===0?/*#__PURE__*/_jsx(\"div\",{class:themeData.wrapper+\" fit-box\",children:/*#__PURE__*/_jsxs(\"div\",{class:themeData.wrapper+\" fit-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:languageData.emptyList}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h2\",{class:themeData.wrapper+\" fit-box\",children:[languageData.fillList,\" \",/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-backpack3-fill\"})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn\",\"data-translate-key\":\"goToFillList\",children:/*#__PURE__*/_jsx(Link,{to:`/home`,\"data-translate-key\":\"goToFillList\",children:languageData.goToFillList})})]})}):'',/*#__PURE__*/_jsx(\"div\",{children:mots.map((item,index)=>{// Sélectionne la définition selon la langue\nconst definition=language==='fr'?item.definitionMotFR:item.definitionMotENG;const mot=language==='fr'?item.nomMotFR:item.nomMot;return/*#__PURE__*/_jsxs(\"div\",{class:themeData.wrapper,children:[/*#__PURE__*/_jsx(\"h1\",{children:mot}),/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-suit-heart-fill\",id:mot,onClick:()=>supprFavoris(item)}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:languageData.definition}),\" \",definition||languageData.unknownDef]})]},index);})})]})});};export default ListeMot;","map":{"version":3,"names":["Link","React","useEffect","useState","useLanguage","useTheme","jsx","_jsx","jsxs","_jsxs","ListeMot","mots","setMots","language","languageData","themeData","deleteFavWordsToUser","login","numMot","response","fetch","method","headers","body","URLSearchParams","objet","action","userName","ok","Error","status","data","json","console","log","error","getFavWords","fetchFavWords","_sessionStorage$getIt","sessionStorage","getItem","favWords","supprFavoris","item","element","document","getElementById","nomMot","classList","toggle","class","main","children","ourList","length","wrapper","emptyList","fillList","to","goToFillList","map","index","definition","definitionMotFR","definitionMotENG","mot","nomMotFR","id","onClick","unknownDef"],"sources":["C:/Users/melis/OneDrive/Documents/ENSIIE/S1/web/PROJET-1/boite-a-mot-good-vers/front/src/pages/ListeMot/ListeMot.jsx"],"sourcesContent":["import { Link } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useLanguage } from '../../store/languageContext';\r\nimport { useTheme } from '../../store/themeContext';\r\n\r\nconst ListeMot = () => {\r\n  const [mots, setMots] = useState([]);\r\n  const { language, languageData } = useLanguage();\r\n  const { themeData } = useTheme();\r\n\r\n\r\n\r\n  const deleteFavWordsToUser = async (login, numMot) => {\r\n    try {\r\n      const response = await fetch('http://localhost/word-box/server/routeur.php', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: new URLSearchParams({\r\n          objet: 'Liste_mot_sympa',\r\n          action: 'delete',\r\n          userName: login,\r\n          numMot: numMot,\r\n        }),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP ! statut : ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Réponse du webservice:', data);\r\n      return data.data || [];\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la récupération des mots favoris :\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Fonction pour récupérer les mots favoris depuis le back\r\n  const getFavWords = async (login) => {\r\n    try {\r\n      const response = await fetch('http://localhost/word-box/server/routeur.php', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: new URLSearchParams({\r\n          objet: 'Mot_sympa',\r\n          action: 'userFavWords',\r\n          userName: login,\r\n        }),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP ! statut : ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Réponse du webservice:', data);\r\n      return data.data || [];\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la récupération des mots favoris :\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Charger les mots favoris au montage du composant\r\n  useEffect(() => {\r\n    const fetchFavWords = async () => {\r\n      const userName = sessionStorage.getItem('userName') ?? 'leChevalierNoir'; // Remplacez par le nom d'utilisateur connecté\r\n      const favWords = await getFavWords(userName);\r\n      setMots(favWords);\r\n    };\r\n\r\n    fetchFavWords();\r\n  }, []);\r\n\r\n  // Fonction pour basculer le statut de favori\r\n  const supprFavoris = (item) => {\r\n    const element = document.getElementById(item.nomMot);\r\n    if (element) {\r\n      element.classList.toggle(\"bi-suit-heart-fill\");\r\n      element.classList.toggle(\"bi-suit-heart\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main class={themeData.main}>\r\n      <div>\r\n        {sessionStorage.getItem('userName') === 'leChevalierNoir' ?\r\n          <h1>{languageData.ourList}</h1>\r\n          : ''}\r\n        {mots.length === 0 ?\r\n          <div class={themeData.wrapper +\" fit-box\"}>\r\n            <div class={themeData.wrapper +\" fit-box\"}>\r\n              <h1>{languageData.emptyList}</h1>\r\n              <br />\r\n              <h2 class={themeData.wrapper +\" fit-box\"}>{languageData.fillList} <i class=\"bi bi-backpack3-fill\"></i></h2>\r\n\r\n              <button class=\"btn\" data-translate-key=\"goToFillList\"><Link to={`/home`} data-translate-key=\"goToFillList\">{languageData.goToFillList}</Link></button>\r\n\r\n            </div>\r\n          </div>\r\n          : ''}\r\n        <div>\r\n          {mots.map((item, index) => {\r\n            // Sélectionne la définition selon la langue\r\n            const definition = language === 'fr' ? item.definitionMotFR : item.definitionMotENG;\r\n            const mot = language === 'fr' ? item.nomMotFR : item.nomMot;\r\n\r\n            return (\r\n              <div key={index} class={themeData.wrapper}>\r\n                <h1>{mot}</h1>\r\n                <i\r\n                  class=\"bi bi-suit-heart-fill\"\r\n                  id={mot}\r\n                  onClick={() => supprFavoris(item)}\r\n                ></i>\r\n                <p>\r\n                  <strong>{languageData.definition}</strong> {definition || languageData.unknownDef}\r\n                </p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ListeMot;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}